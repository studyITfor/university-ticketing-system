<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Validation Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input { width: 300px; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
        button { padding: 10px 20px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-secondary { background-color: #6c757d; color: white; }
    </style>
</head>
<body>
    <h1>Form Validation Test</h1>
    
    <form id="testForm">
        <div class="form-group">
            <label for="firstName">–ò–º—è *</label>
            <input type="text" id="firstName" name="firstName" placeholder="–ò–≤–∞–Ω" required>
        </div>
        <div class="form-group">
            <label for="lastName">–§–∞–º–∏–ª–∏—è *</label>
            <input type="text" id="lastName" name="lastName" placeholder="–ò–≤–∞–Ω–æ–≤" required>
        </div>
        <div class="form-group">
            <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
            <input type="tel" id="phone" name="phone" placeholder="+996 777 123 456" required>
        </div>
        <div class="form-group">
            <label for="email">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ *</label>
            <input type="email" id="email" name="email" placeholder="student@mail.com" required>
        </div>
        <div>
            <button type="button" class="btn-secondary" id="fillForm">Fill Form</button>
            <button type="submit" class="btn-primary">Submit</button>
            <button type="button" class="btn-secondary" id="testValidation">Test Validation</button>
        </div>
    </form>
    
    <div id="output" style="margin-top: 20px; padding: 10px; background-color: #f8f9fa; border-radius: 4px;"></div>
    
    <script>
        // Copy the validation function from the main script
        function validateBooking(data) {
            const errors = [];
            
            console.log('üîç DEBUG: Validation data:', {
                firstName: `"${data.firstName}" (type: ${typeof data.firstName})`,
                lastName: `"${data.lastName}" (type: ${typeof data.lastName})`,
                phone: `"${data.phone}" (type: ${typeof data.phone})`,
                email: `"${data.email}" (type: ${typeof data.email})`
            });

            if (!data.firstName || !data.firstName?.trim()) errors.push('–ò–º—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ');
            if (!data.lastName || !data.lastName?.trim()) errors.push('–§–∞–º–∏–ª–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞');
            if (!data.phone || !data.phone?.trim()) errors.push('–¢–µ–ª–µ—Ñ–æ–Ω –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω');
            if (!data.email || !data.email?.trim()) errors.push('–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞');

            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (data.email && !emailRegex.test(data.email)) {
                errors.push('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã');
            }

            // Phone validation
            const phoneRegex = /^[\+]?[1-9][\d]{0,15}$/;
            if (data.phone && !phoneRegex.test(data.phone.replace(/\s/g, ''))) {
                errors.push('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');
            }

            if (errors.length > 0) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø—Ä–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –æ—à–∏–±–∫–∏:\\n' + errors.join('\\n'));
                return false;
            }

            return true;
        }
        
        // Form submission handler
        document.getElementById('testForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const form = document.getElementById('testForm');
            const formData = new FormData(form);
            
            // Check form data capture
            const fieldValues = {};
            for (let [key, value] of formData.entries()) {
                fieldValues[key] = value;
            }
            
            const bookingData = {
                firstName: formData.get('firstName'),
                lastName: formData.get('lastName'),
                phone: formData.get('phone'),
                email: formData.get('email')
            };
            
            const output = document.getElementById('output');
            output.innerHTML = `
                <h3>Form Data Captured:</h3>
                <pre>${JSON.stringify(fieldValues, null, 2)}</pre>
                <h3>Booking Data Object:</h3>
                <pre>${JSON.stringify(bookingData, null, 2)}</pre>
                <h3>Validation Result:</h3>
                <p>${validateBooking(bookingData) ? '‚úÖ Valid' : '‚ùå Invalid'}</p>
            `;
        });
        
        // Fill form button
        document.getElementById('fillForm').addEventListener('click', () => {
            document.getElementById('firstName').value = '–ò–≤–∞–Ω';
            document.getElementById('lastName').value = '–ò–≤–∞–Ω–æ–≤';
            document.getElementById('phone').value = '+996555123456';
            document.getElementById('email').value = 'ivan@example.com';
        });
        
        // Test validation button
        document.getElementById('testValidation').addEventListener('click', () => {
            // Test with different data sets
            const tests = [
                { name: 'Empty', data: { firstName: '', lastName: '', phone: '', email: '' } },
                { name: 'Filled', data: { firstName: '–ò–≤–∞–Ω', lastName: '–ò–≤–∞–Ω–æ–≤', phone: '+996555123456', email: 'ivan@example.com' } },
                { name: 'Null', data: { firstName: null, lastName: null, phone: null, email: null } },
                { name: 'Undefined', data: { firstName: undefined, lastName: undefined, phone: undefined, email: undefined } }
            ];
            
            const output = document.getElementById('output');
            let results = '<h3>Validation Tests:</h3>';
            
            tests.forEach(test => {
                const result = validateBooking(test.data);
                results += `<p><strong>${test.name}:</strong> ${result ? '‚úÖ Valid' : '‚ùå Invalid'}</p>`;
            });
            
            output.innerHTML = results;
        });
    </script>
</body>
</html>
